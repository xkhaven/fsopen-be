{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","exportObject","getAll","axios","get","then","response","data","create","newObject","post","update","id","put","remove","delete","Filter","value","handleChange","name","onChange","PersonForm","handleNewNameChange","handleNewNumberChange","newName","newNumber","handleAddClick","onClick","type","Persons","displayList","handleDeleteClick","Person","person","number","map","App","useState","persons","setPersons","setNewName","setNewNumber","searchFilter","setSearchFilter","message","setMessage","useEffect","personsService","result","e","preventDefault","exists","find","p","toLocaleLowerCase","trim","replace","alert","window","confirm","setTimeout","catch","error","console","log","filter","target","handleFilterChange","Notification","className","match","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f23a486d.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst remove = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request.then(response => response.data)\n}\n\nconst exportObject = {\n  getAll,\n  create,\n  update,\n  remove\n}\n\nexport default exportObject\n","import React, { useEffect, useState } from 'react'\nimport personsService from './services/persons'\nimport './App.css'\n\nconst Filter = ({value, handleChange}) => (\n  <div>\n    Filter names: <input name=\"filter\" value={value} onChange={handleChange()} />\n  </div>\n)\n\nconst PersonForm = ({handleNewNameChange, handleNewNumberChange, newName, newNumber, handleAddClick}) => (\n  <form>\n    <div>\n      Name: <input name=\"name\" value={newName} onChange={handleNewNameChange()}/> <br/>\n      Number: <input name=\"number\" value={newNumber} onChange={handleNewNumberChange()}/>\n    </div>\n    <div>\n      <button onClick={handleAddClick()} type=\"submit\">add</button>\n    </div>\n  </form>\n)\n\nconst Persons = ({displayList, handleDeleteClick}) => {\n  const Person = (person) => (\n    <li key={person.name}>{person.name}, {person.number}\n    <button key={person.name} onClick={() => handleDeleteClick(person.id)}>Delete</button></li>\n  )\n\n  return (\n    <ul>\n      {displayList.map(person => <Person key={person.name} {...person} />)}\n    </ul>\n  )\n}\n\nconst App = () => {\n  const [ persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ searchFilter, setSearchFilter ] = useState('')\n  const [ message, setMessage ] = useState(null)\n\n  useEffect(() => {\n    personsService\n      .getAll()\n      .then(result => setPersons(result))\n  }, [])\n\n  const handleAddClick = (e) => {\n    e.preventDefault()\n    if (!newName || !newNumber) return\n\n    const exists = persons.find(p => p.name.toLocaleLowerCase() === newName.trim().toLocaleLowerCase())\n\n    if (exists) {\n      let message = `${newName} is already added to phonebook.`\n\n      if (newNumber.replace(/\\D/g, '') === exists.number.replace(/\\D/g, '')) {\n        alert(message)\n        return\n      }\n      else {\n        if (window.confirm(message + ' Do you want to replace the number with the new one?')) {\n          personsService\n            .update(exists.id, {'name': exists.name, 'number': newNumber.trim()})\n            .then(result => {\n              setPersons(persons.map(p => p.id === exists.id ? result : p))\n              setMessage({message: `Number changed for ${exists.name}`, type: 'notify'})\n              setTimeout(() => setMessage(null), 5000)\n            })\n            .catch(error => {\n              console.log(error)\n              setMessage({message: `${exists.name} is already removed from the server.`, type: 'error'})\n              setTimeout(() => setMessage(null), 5000)\n              setPersons(persons.filter(p => p.id !== exists.id))\n            })\n\n          setNewName('')\n          setNewNumber('')\n        }\n      }\n    }\n    else {\n      personsService\n        .create({'name': newName.trim(), 'number': newNumber.trim()})\n        .then(result => {\n          setPersons(result)\n          setNewName('')\n          setNewNumber('')\n\n          setMessage({message: `${newName} added!`, type: 'notify'})\n          setTimeout(() => setMessage(null), 5000)\n        })\n        .catch(error => {\n          console.log(error)\n          setMessage({message: error, type: 'error'})\n          setTimeout(() => setMessage(null), 5000)\n        })\n    }\n  }\n\n  const handleDeleteClick = (id) => {\n    const name = persons.find(p => p.id === id).name\n    if (window.confirm(`Are you sure to delete ${name}?`)) {\n      personsService\n        .remove(id)\n        .then(result => {\n          setPersons(persons.filter(p => p.id !== id))\n          setMessage({message: `${name} deleted from phonebook.`, type: 'notify'})\n          setTimeout(() => setMessage(null), 5000)\n        })\n        .catch(error => {\n          console.log(error)\n          setMessage({message: error, type: 'error'})\n          setTimeout(() => setMessage(null), 5000)\n        })\n    }\n  }\n\n  const handleNewNameChange = (e) => {\n    setNewName(e.target.value)\n  }\n\n  const handleNewNumberChange = (e) => {\n    setNewNumber(e.target.value)\n  }\n\n  const handleFilterChange = (e) => {\n    setSearchFilter(e.target.value)\n  }\n\n  const Notification = ({message}) => {\n    if (message === null) {\n      return null\n    }\n\n    return (\n      <div className={`message ${message.type}`}>\n        {message.message}\n      </div>\n    )\n  }\n\n  const displayList = searchFilter\n      ? persons.filter((person) => person.name.toLocaleLowerCase().match(searchFilter.toLocaleLowerCase()))\n      : persons\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} />\n      <Filter value={searchFilter} handleChange={() => handleFilterChange} />\n\n      <h3>Add a new</h3>\n      <PersonForm\n        handleNewNameChange={() => handleNewNameChange}\n        handleNewNumberChange={() => handleNewNumberChange}\n        newName={newName}\n        newNumber={newNumber}\n        handleAddClick={() => handleAddClick}\n      />\n\n      <h3>Numbers</h3>\n      <Persons displayList={displayList} handleDeleteClick={handleDeleteClick} />\n    </div>\n  )\n}\n\nexport default App\n","import ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}