(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(14),a=t.n(r),c=t(3),u=t(15),o=t(2),i=t(4),l=t.n(i),s="/api/persons",d={getAll:function(){return l.a.get(s).then((function(e){return e.data}))},create:function(e){return l.a.post(s,e).then((function(e){return e.data}))},update:function(e,n){return l.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},remove:function(e){return l.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))}},m=(t(38),t(0)),f=function(e){var n=e.value,t=e.handleChange;return Object(m.jsxs)("div",{children:["Filter names: ",Object(m.jsx)("input",{name:"filter",value:n,onChange:t()})]})},h=function(e){var n=e.handleNewNameChange,t=e.handleNewNumberChange,r=e.newName,a=e.newNumber,c=e.handleAddClick;return Object(m.jsxs)("form",{children:[Object(m.jsxs)("div",{children:["Name: ",Object(m.jsx)("input",{name:"name",value:r,onChange:n()})," ",Object(m.jsx)("br",{}),"Number: ",Object(m.jsx)("input",{name:"number",value:a,onChange:t()})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{onClick:c(),type:"submit",children:"add"})})]})},j=function(e){var n=e.displayList,t=e.handleDeleteClick,r=function(e){return Object(m.jsxs)("li",{children:[e.name,", ",e.number,Object(m.jsx)("button",{onClick:function(){return t(e.id)},children:"Delete"},e.name)]},e.name)};return Object(m.jsx)("ul",{children:n.map((function(e){return Object(m.jsx)(r,Object(u.a)({},e),e.name)}))})},b=function(){var e=Object(o.useState)([]),n=Object(c.a)(e,2),t=n[0],r=n[1],a=Object(o.useState)(""),u=Object(c.a)(a,2),i=u[0],l=u[1],s=Object(o.useState)(""),b=Object(c.a)(s,2),p=b[0],O=b[1],g=Object(o.useState)(""),v=Object(c.a)(g,2),x=v[0],w=v[1],C=Object(o.useState)(null),y=Object(c.a)(C,2),N=y[0],k=y[1];Object(o.useEffect)((function(){d.getAll().then((function(e){return r(e)}))}),[]);var L=function(e){if(e.preventDefault(),i&&p){var n=t.find((function(e){return e.name.toLocaleLowerCase()===i.trim().toLocaleLowerCase()}));if(n){var a="".concat(i," is already added to phonebook.");if(p.replace(/\D/g,"")===n.number.replace(/\D/g,""))return void alert(a);window.confirm(a+" Do you want to replace the number with the new one?")&&(d.update(n.id,{name:n.name,number:p.trim()}).then((function(e){r(t.map((function(t){return t.id===n.id?e:t}))),k({message:"Number changed for ".concat(n.name),type:"notify"}),setTimeout((function(){return k(null)}),5e3)})).catch((function(e){console.log(e),k({message:"".concat(n.name," is already removed from the server."),type:"error"}),setTimeout((function(){return k(null)}),5e3),r(t.filter((function(e){return e.id!==n.id})))})),l(""),O(""))}else d.create({name:i.trim(),number:p.trim()}).then((function(e){r(e),l(""),O(""),k({message:"".concat(i," added!"),type:"notify"}),setTimeout((function(){return k(null)}),5e3)})).catch((function(e){console.log(e.response.data),k({message:e.response.data.error,type:"error"}),setTimeout((function(){return k(null)}),5e3)}))}},D=function(e){l(e.target.value)},A=function(e){O(e.target.value)},T=function(e){w(e.target.value)},S=function(e){var n=e.message;return null===n?null:Object(m.jsx)("div",{className:"message ".concat(n.type),children:n.message})},E=x?t.filter((function(e){return e.name.toLocaleLowerCase().match(x.toLocaleLowerCase())})):t;return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Phonebook"}),Object(m.jsx)(S,{message:N}),Object(m.jsx)(f,{value:x,handleChange:function(){return T}}),Object(m.jsx)("h3",{children:"Add a new"}),Object(m.jsx)(h,{handleNewNameChange:function(){return D},handleNewNumberChange:function(){return A},newName:i,newNumber:p,handleAddClick:function(){return L}}),Object(m.jsx)("h3",{children:"Numbers"}),Object(m.jsx)(j,{displayList:E,handleDeleteClick:function(e){var n=t.find((function(n){return n.id===e})).name;window.confirm("Are you sure to delete ".concat(n,"?"))&&d.remove(e).then((function(a){r(t.filter((function(n){return n.id!==e}))),k({message:"".concat(n," deleted from phonebook."),type:"notify"}),setTimeout((function(){return k(null)}),5e3)})).catch((function(e){console.log(e),k({message:e,type:"error"}),setTimeout((function(){return k(null)}),5e3)}))}})]})};a.a.render(Object(m.jsx)(b,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.5f1bc17f.chunk.js.map